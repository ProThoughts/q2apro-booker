// https://github.com/riklomas/quicksearch
!function(e,t){e.fn.quicksearch=function(n,i){var s,r,o,h,l="",u=this,a=e.extend({delay:100,selector:null,stripeRows:null,loader:null,noResults:"",bind:"keyup",onBefore:function(){},onAfter:function(){},show:function(){this.style.display=""},hide:function(){this.style.display="none"},prepareQuery:function(e){return e.toLowerCase().split(" ")},testQuery:function(e,t){for(var n=0;n<e.length;n+=1)if(-1===t.indexOf(e[n]))return!1;return!0}},i);return this.go=function(){for(var e=0,t=!0,n=a.prepareQuery(l),i=0===l.replace(" ","").length,e=0,s=o.length;s>e;e++)i||a.testQuery(n,r[e],o[e])?(a.show.apply(o[e]),t=!1):a.hide.apply(o[e]);return t?this.results(!1):(this.results(!0),this.stripe()),this.loader(!1),a.onAfter(),this},this.stripe=function(){if("object"==typeof a.stripeRows&&null!==a.stripeRows){var t=a.stripeRows.join(" "),n=a.stripeRows.length;h.not(":hidden").each(function(i){e(this).removeClass(t).addClass(a.stripeRows[i%n])})}return this},this.strip_html=function(t){var n=t.replace(new RegExp("<[^<]+>","g"),"");return n=e.trim(n.toLowerCase())},this.results=function(t){return"string"==typeof a.noResults&&""!==a.noResults&&(t?e(a.noResults).hide():e(a.noResults).show()),this},this.loader=function(t){return"string"==typeof a.loader&&""!==a.loader&&(t?e(a.loader).show():e(a.loader).hide()),this},this.cache=function(){h=e(n),"string"==typeof a.noResults&&""!==a.noResults&&(h=h.not(a.noResults));var t="string"==typeof a.selector?h.find(a.selector):e(n).not(a.noResults);return r=t.map(function(){return u.strip_html(this.innerHTML)}),o=h.map(function(){return this}),this.go()},this.trigger=function(){return this.loader(!0),a.onBefore(),t.clearTimeout(s),s=t.setTimeout(function(){u.go()},a.delay),this},this.cache(),this.results(!0),this.stripe(),this.loader(!1),this.each(function(){e(this).bind(a.bind,function(){l=e(this).val(),u.trigger()})})}}(jQuery,this,document),jQuery.extend({highlight:function(e,t,n,i){if(3===e.nodeType){var s=e.data.match(t);if(s){var r=document.createElement(n||"span");r.className=i||"highlight";var o=e.splitText(s.index);o.splitText(s[0].length);var h=o.cloneNode(!0);return r.appendChild(h),o.parentNode.replaceChild(r,o),1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&(e.tagName!==n.toUpperCase()||e.className!==i))for(var l=0;l<e.childNodes.length;l++)l+=jQuery.highlight(e.childNodes[l],t,n,i);return 0}}),jQuery.fn.unhighlight=function(e){var t={className:"highlight",element:"span"};return jQuery.extend(t,e),this.find(t.element+"."+t.className).each(function(){var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()},jQuery.fn.highlight=function(e,t){var n={className:"highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(jQuery.extend(n,t),e.constructor===String&&(e=[e]),e=jQuery.grep(e,function(e){return""!=e}),e=jQuery.map(e,function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==e.length)return this;var i=n.caseSensitive?"":"i",s="("+e.join("|")+")";n.wordsOnly&&(s="\\b"+s+"\\b");var r=new RegExp(s,i);return this.each(function(){jQuery.highlight(this,r,n.element,n.className)})};